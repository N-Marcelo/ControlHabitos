<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Control de Hábitos - Inicio</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f6f8fb; }
        .navbar { background: #1682f9 !important; }
        .navbar-brand, .nav-link { color: white !important; font-weight: 500; }
        .nav-link:hover { color: #c9e4fc !important; }
        .main-content { display: flex; justify-content: center; align-items: center; min-height: 80vh; }
        .login-container {
            background: white;
            border-radius: 18px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.07);
            padding: 38px 36px 32px 36px;
            width: 340px;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            align-items: stretch;
        }
        .login-title { font-size: 2rem; font-weight: 600; margin-bottom: 25px; text-align: center; }
        .login-label { font-size: 1.04rem; margin-bottom: 6px; margin-top: 12px; font-weight: 500; }
        .login-input { height: 40px; padding: 8px 12px; font-size: 1rem; border: 1px solid #cfd8e3; border-radius: 7px; margin-bottom: 6px; background: #f8fafc; }
        .login-input:focus { border: 1.5px solid #1682f9; outline: none; background: #fff; }
        .login-button { margin-top: 20px; background: #1682f9; color: white; border: none; border-radius: 7px; height: 44px; font-size: 1.15rem; font-weight: 500; cursor: pointer; transition: background 0.2s; }
        .login-button:hover { background: #126cc1; }
        .forgot-link { color: #1682f9; text-decoration: none; font-size: 1.05rem; margin-top: 12px; text-align: left; display: inline-block; transition: color 0.2s; }
        .forgot-link:hover { color: #0e528d; }
        @media (max-width: 900px) {
            .main-content { flex-direction: column; align-items: center; height: auto; margin-top: 30px; }
            .login-container { margin-right: 0; margin-bottom: 32px; }
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="/index">Control de Hábitos</a>
            <div class="ms-auto">
                <a class="nav-link" href="/registro">Registrarse</a>
            </div>
        </div>
    </nav>
    <div class="main-content">
        <form class="login-container" method="post" action="/login">
            <div class="login-title">Inicio de Sesión</div>
            <label class="login-label" for="usuario">Correo</label>
            <input class="login-input" type="text" id="usuario" name="usuario" required>
            <label class="login-label" for="contrasena">Contraseña</label>
            <input class="login-input" type="password" id="contrasena" name="contrasena" required>
            <button class="login-button" type="submit">Iniciar Sesión</button>
            <a href="#" class="forgot-link" data-bs-toggle="modal" data-bs-target="#modalRecuperarContrasena">¿Olvidaste tu contraseña?</a>
            <!-- Mensaje de error si corresponde -->
            <div th:if="${error}" style="color:red; margin-top:10px; text-align:center;">
                <span th:text="${error}"></span>
            </div>
        </form>
    </div>

    <div class="modal fade" id="modalRecuperarContrasena" tabindex="-1" aria-labelledby="modalRecuperarContrasenaLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalRecuperarContrasenaLabel">Recuperar contraseña</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form method="post" action="/RecuperarContraseña" class="needs-validation" novalidate>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="correoRecuperacion" class="form-label">Ingresa tu correo electrónico</label>
                            <input
                                    type="email"
                                    class="form-control login-input"
                                    id="correoRecuperacion"
                                    name="correo"
                                    required
                                    pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                                    placeholder="ejemplo@correo.com"
                            >
                            <div class="invalid-feedback">Por favor ingresa un correo válido.</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary login-button">Enviar enlace</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
